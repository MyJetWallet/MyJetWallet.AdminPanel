@using Service.Fees.Domain.Models
<BaseTwoButtonsDialog
    Caption=@(!IsCreate ? $"Fees settings for {Item.BrokerId}" : "Create a new fees settings")
    OnClose="OnClose"
    YesButtonCaption="@(IsCreate ? "Create" : "Save")"
    NoButtonCaption="Close"
    OnSubmit="OnSubmit">
    <EditForm Model="@this">
        <table>
            <tr>
                <td>
                    <table>
                        <tr>
                            <td>Broker</td>
                            <td class="float-left">
                                @if (!IsCreate)
                                {
                                    @Item.BrokerId
                                }
                                else
                                {
                                    <input type="text" class="form-control" @bind="Item.BrokerId"/>
                                }
                            </td>
                        </tr>
                        <tr>
                            <td>Fee account id</td>
                            <td class="float-left">
                                <input type="text" class="form-control" @bind="Item.AccountId"/>
                            </td>
                        </tr>
                        <tr>
                            <td>Fee wallet id</td>
                            <td class="float-left">
                                <input type="text" class="form-control" @bind="Item.WalletId"/>
                            </td>
                        </tr>
                    </table>
                </td>
            </tr>
        </table>
    </EditForm>
</BaseTwoButtonsDialog>

@code {

    [Parameter]
    public FeesSettings Item { get; set; }

    [Parameter]
    public bool IsCreate { get; set; }

    [Parameter]
    public EventCallback OnCloseCallback { get; set; }

    [Parameter]
    public EventCallback<FeesSettings> OnCreateCallback { get; set; }

    [Parameter]
    public EventCallback<FeesSettings> OnUpdateCallback { get; set; }

    private void OnClose()
    {
        OnCloseCallback.InvokeAsync();
    }

    private async Task OnSubmit()
    {
        if (IsCreate)
            await OnCreateCallback.InvokeAsync(Item);
        else
            await OnUpdateCallback.InvokeAsync(Item);
    }

    protected override void OnInitialized()
    {
        base.OnInitialized();
        if (IsCreate)
            Item = new FeesSettings();
    }
}