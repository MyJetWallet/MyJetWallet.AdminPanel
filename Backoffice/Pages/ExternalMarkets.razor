@page "/ExternalMarkets"

@using Backoffice.Components.ExternalMarkets
@using Backoffice.Services.ExternalMarkets

@inject IExternalMarketsSettingsManager _manager

@{
    var externalMarketsSettingsServices = _manager.GetExternalMarketsSettingsServices();
}

<ul class="nav nav-tabs nav-pills">
    @foreach (var externalMarketsSettingsService in externalMarketsSettingsServices)
    {
        <li class="nav-item" style="margin: 10px">
            <button class="nav-link" aria-current="page" @onclick="@(() => SetService(externalMarketsSettingsService))" >@externalMarketsSettingsService.Name</button>
        </li>
    }
</ul>

@foreach (var externalMarketsSettingsService in externalMarketsSettingsServices)
{
    if (ActiveService == externalMarketsSettingsService)
    {
        <ExternalMarketsListComponent ExternalMarketsSettingsService="@externalMarketsSettingsService"/>
    }
}

@code {

    private ExternalMarketsSettingsService ActiveService { get; set; }

    private void SetService(ExternalMarketsSettingsService service)
    {
        ActiveService = null;
        StateHasChanged();
        
        ActiveService = service;
        StateHasChanged();
    }
}